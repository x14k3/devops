# TUN与TAP模式-openvpn 

OpenVPN可以在两种模式下运行，分别是TUN模式和TAP模式。这两种模式在网络层次上有一些区别，主要涉及到 OSI 模型中的第二层和第三层。

**TUN模式：**

1. TUN模式基于OSI模型的第三层（网络层）工作，它创建一个虚拟的点对点网络设备。
2. 在TUN模式下，OpenVPN将整个IP数据包封装在通道中传输。这使得TUN模式适用于路由器、网关和其他网络设备，因为它们通常在网络层上操作。
3. TUN模式通常用于创建点对点的VPN连接，例如用于连接两个远程网络的场景。

**TAP模式：**

1. TAP模式基于OSI模型的第二层（数据链路层）工作，它创建一个虚拟的以太网适配器。
2. 在TAP模式下，OpenVPN将整个以太网帧封装在通道中传输。这使得TAP模式适用于需要在数据链路层上进行操作的场景，例如在局域网中扩展虚拟以太网段。
3. TAP模式通常用于需要将远程用户作为本地以太网的一部分接入到网络的场景，比如允许远程用户加入公司内部局域网。

‍

**选择 TUN 还是 TAP 取决于特定的网络需求和应用场景：**

**TUN 模式：**

- 适用于路由器、网关和点对点连接的场景。
- 在网络层面上操作，通常更轻量和高效。
- 通常用于连接不同地理位置的网络。

**TAP 模式：**

- 适用于需要将远程用户作为本地以太网的一部分接入到网络的场景。
- 在数据链路层面上操作，能够扩展虚拟以太网段。
- 通常用于创建虚拟的局域网，让远程用户能够像本地用户一样参与局域网内的活动。

在实际使用中，根据具体的需求和网络拓扑结构，选择合适的模式是很重要的。
