

## 集群架构

集群：同一个业务，部署在多个服务器上

### LB集群

这类集群主要作用是对用户的流量做负载均衡，让其后端每个server都能均衡的处理一部分请求；这类集群有一个特点就是前端调度器通常是单点，后端server有很多台，即便某一台后端server挂掉，也不影响用户的请求；

![image](image-20230611134104-o9p0p13.png)

负载均衡(Load Balance，简称LB)是⼀种服务或基于硬件设备等实现的  高可用反向代理技术，负载均衡将特定的业务(web服务、网络流量等)分担给指定的⼀个或多个后端特定的服务器或设备，从而提高了公司业务的并发处理能力、保证了业务的高可用性、方便了业务后期的水平动态扩展。

<span data-type="text" style="background-color: var(--b3-font-background8);">为什么使用负载均衡？</span>

```bash
Web服务器的动态⽔平扩展-->对⽤户⽆感知 
增加业务并发访问及处理能⼒-->解决单服务器瓶颈问题 
节约公⽹IP地址-->降低IT⽀出成本 
隐藏内部服务器IP-->提⾼内部服务器安全性 
配置简单-->固定格式的配置⽂件 
功能丰富-->⽀持四层和七层，⽀持动态下线主机 
性能较强-->并发数万甚⾄数⼗万
```

<span data-type="text" style="background-color: var(--b3-font-background8);">负载均衡类型</span>

**四层（传输层）：**

```bash
LVS(Linux Virtual Server)
HAProxy(High Availability Proxy) 
Nginx(1.9)
```

**七层：**

```bash
HAProxy 
Nginx
```

**硬件：**

```bash
F5         #https://f5.com/zh 
Netscaler  #https://www.citrix.com.cn/products/citrix-adc/ 
Array      #https://www.arraynetworks.com.cn/ 
深信服      #http://www.sangfor.com.cn/ 
北京灵州     #http://www.lingzhou.com.cn/cpzx/llfzjh/
```

## 1.3 应用场景

```bash
四层：Redis、Mysql、RabbitMQ、Memcache等 
七层：Nginx、Tomcat、Apache、PHP 、图⽚、动静分离、API等
```

‍

‍

### HA集群

所谓ha集群就是高可用集群，这类集群的主要作用是对集群中的单点做高可用，所谓高可用就是在发生故障时，能够及时的将故障转移，从而使故障修复时间最小；这类集群的特点是在多台节点上，各空闲节点会一直盯着工作节点，工作节点也会基于多播或广播的方式把自己的心跳信息发送给其他空闲节点，一旦工作节点的心跳信息在一定时间内空闲节点没有收到，那么此时就会触发资源抢占，先抢到资源的成为新的工作节点，而其他节点又会一直盯着新的工作节点，直到它挂掉，然后再次触发资源抢占；这类集群的特点就是一个节点工作，其他节点看着它工作，一旦工作节点挂了，立刻会有其他节点上来顶替它的工作；

### HP集群

HP集群主要用于在复杂计算中场景中，把多台server的算力综合一起，对复杂计算要求比较高的环境中使用；

‍

## 分布式架构

分布式：一个业务分拆多个子业务，部署在不同的服务器上

将同一个业务拆分成多个子业务，各个子业务部署在不同的服务器上，这就是分布式架构，通过将业务拆细，为不同的子业务配置不同性能的服务器，提高整个系统的性能。*我个人认为目前很火的微服务概念其实本质上就是分布式。*

### 分布式计算

使多台计算机协同工作以解决共同问题的方法。它使计算机网络看起来就像一台功能强大的计算机，可提供大规模资源来应对复杂的挑战。例如，分布式计算可以加密大量数据；求解具有许多变量的物理和化学方程式；以及渲染高质量的三维视频动画。分布式系统、分布式编程和分布式算法是指代分布式计算的其他一些术语。

### 分布式存储

数据被分散存储在多个独立的存储服务器上，这些分散的数据存储服务器构成了一个虚拟的存储系统。分布式存储使用的负载均衡技术可以有效避免系统中可能出现的数据存储不均衡问题。分布式存储系统可将底层存储设备的资源整合，在性能允许的情况下，将饱和设备中的数据划分到其他底层存储设备上，从而实现分布式存储的负载均衡。

### 分布式与集群

集群大多应用于业务的单点和负载上，分布式应用于高并发，但高可用是一个系统能够长期稳定运行基本保障。因此用到分布式架构的系统基本上都会用到集群，而用集群架构的系统却不一定会用到分布式。
