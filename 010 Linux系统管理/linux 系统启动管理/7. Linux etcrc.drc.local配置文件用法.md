# 7. Linux etcrc.drc.local配置文件用法

‍

在 /etc/rc[06].d/  目录中的程序启动之后，系统的启动就已经完成。不过，我们总有一些程序是需要在系统启动之后随着系统一起启动的。这时我们并不需要自己把需要启动的服务链接到  /etc/rc3.d/ 目录中，因为系统给我们准备了 /etc/rc.d/rc.local 配置文件。

这个配置文件会在用户登陆之前读取，这个文件中写入了什么命令，在每次系统启动时都会执行一次。也就是说，如果有任何需要在系统启动时运行的工作，则只需写入 /etc/rc.d/rc.local 配置文件即可。这个文件的内容如下：

```bash
[root@localhost ~]# ll /etc/rc.local
Irwxrwxrwx. 1 root root 13 4月10 21:46 /etc/rc.local -> rc.d/rc.local
#有一个链接文件，两个文件修改哪一个都可以
[root@localhost ~]#vi /etc/rc.d/rc.local
#!/bin/sh
#
#This script will be executed *after* all the other init scripts.
#You can put your own initialization stuff in here if you don't
#want to do the full Sys V style init stuff.
touch /var/lock/subsys/local
#默认会touch这个文件，每次系统启动时都会touch这个文件，这个文件的修改时间就是系统的启动时间
/etc/rc.d/init.d/httpd start
#如果写入RPM包安装的apache服务的启动命令，apache服务就会在开机时自动启动
```

Linux 的启动过程基本上就是这样的，我们把启动流程图补充完整，如图 1 所示。

​![2-1Q02310563a22](assets/2-1Q02310563a22-20231113133730-tq75hme.jpg)​

系统的启动过程就是这样的，最终我们就能登录字符界面的 Linux 了。不过，如果需要启动图形界面的 Linux，则还需要调用 X Window 接口。

在启动过程中还有一个配置文件会生效，就是 /etc/init/start-ttys.conf，这个文件主要定义了 Linux 支持的 1~6 个本地终端（tty[1-6])。如果在本机，则可以使用快捷键 Alt+F1 ~F6来切换这 6  个本地终端；如果安装并启动了图形界面，则可以使用快捷键 Ctrl+Alt+F7 来切换图形终端。

至此，字符界面的启动过程就介绍完了。是不是非常复杂？如果你是初学者，则只需了解，不需要彻底掌握。但是掌握了 Linux  系统的启动过程，会更加了解 Linux 的结构。当然，如果你非常自信，则可以尝试安装 gentoo Linux 这个版本，因为这个 Linux  版本到目前为止还是纯源码安装的，如果能够安装成功，就会对 Linux 系统的结构及启动过程有更深入的理解。
