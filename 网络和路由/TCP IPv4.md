
#network

# 一、数据交换技术

## 电路交换

在数据传输前，两个结点之间必须先建立一条专用（双方独占）的物理通信路径（由通信双方之间的交换设备和链路逐段连接而成）。该路径在整个数据传输期间一直被独占，直到通信结束才被释放。因此，电路交换技术分为三阶段：**连接建立、数据传输、连接释放。**

电路交换的关键点为，在数据传输过程中，双方用户始终独占资源。链路建立后，除源结点和目的结点外，电路上的任何结点为“直通方式”，不存在存储转发。

![](assets/TCP%20IPv4/image-20221127211803645.png)

在了解了电路交换的过程之后，我们得出以下几点结论：

**优点：**

1）通信时延小：通信线路为双方用户专用，数据直达；

2）有序传输：双方按顺序发送数据，不存在失序问题；

3）没有冲突：不同通信双方拥有不同信道；

4）适用范围广：模拟信号和数字信号传输均适用；

5）实时性强：物理链路一旦建立，双方就可以随时通信；

6）控制简单：电路交换的交换设备及控制均较简单。

**缺点：**

1）建立连接时间长：平均连接建立时间对计算机通信来说太长；

2）线路独占，使用率低：连接建立后，双方独占物理线路。即便通信线路空闲，也不能供其他用户使用；

3）灵活性差：双方建立的线路中任何一点出现了故障，就必须重新拨号建立连接；

4）难以规格化：电路交换数据直达，不同类型、不同规格、不同速率的终端很难相互通信，也很难进行差错控制。

## 报文交换

以报文为数据单位交换，通信前不需要建立连接，报文在交换结点采用存储转发的传输方式。什么是报文？什么是存储转发？报文就是源应用发送的信息整体，报文中携带有目的地址、源地址等信息，存储转发是指交换设备接收到数据后不会直接转发，而是暂时存储起来，直到有链路空闲再进行转发。

下图为报文交换的示意图，从图中我们可以看出，双方通信的链路并不唯一，报文可以随机选择转发路径，但在刚刚讲到的电路交换中双方的通信路径是固定不变的。

![](assets/TCP%20IPv4/image-20221127211811445.png)

了解了报文交换的过程，我们可以总结出以下几点：

**优点：**

1）无需建立连接；

2）存储转发，动态分配线路：交换设备接收到报文后，先存储整个报文段，然后选择一条合适的空闲线路，将报文发送出去；

3）提高线路的利用率：双方并不是固定占有一条线路，而是在不同时间段部分占用这条物理线路；

4）提高线路的可靠性：如果一条线路出现故障，可以选择另一条线路；

5）提供多目标服务：一个报文可以同时发送给多个目标地址。

**缺点：**

1）有存储转发时延（包括接收报文、检验正确性、排队、发送时间等）；

2）报文大小不定，需要网络节点有较大缓存空间。

## 分组交换

同报文交换一样，分组交换也不需要建立连接，采用存储转发方式，但是解决了报文交换中大报文传输（报文过大需要分段）的问题。分组交换限制了每次传输的数据块大小，将大的数据块划分为若干小数据块，再在每个小数据块中加上必要的控制信息（源地址、目的地址、分组编号等），构成分组。网络结点根据控制信息将分组转发到下一个结点，下一个结点接收到分组后，暂时保存并排队等待，然后根据分组信息选择它的下一个结点，直到到达目的结点。

下图为分组交换的示意图，从图中可以看出，一个报文被分成了若干的分组，并且每个分组在中间结点的传输过程可以是并行的，但在刚才讲到的报文交换中，数据的传输是串行的。如果还是不太明白数据是如何串行和并行传输的，后面会给大家展示一张经典的数据交换技术的对比图。

![](assets/TCP%20IPv4/image-20221127211820523.png)

![](assets/TCP%20IPv4/image-20221127211826434.png)

了解了分组交换的过程，我们可以得出以下结论：

**优点：**

1）无建立时延、线路利用率高（和报文交换一样）；

2）简化了存储管理（相对于报文交换）：因为分组长度固定，相对应的缓冲区大小也固定；

3）加速传输：分组是逐个传输的，可以使后一个分组的存储操作和前一个分组转发操作并行，这种流水线的传输方式减少了报文的传输时间。此外，传输一个分组需要的缓冲区比传输一个报文的缓冲区小得多，这样因为缓冲区不足而等待发生的概率和时间也小得多；

4）减少了出错概率和重大数据量：分组较短，出错概率较小。

**缺点：**

1）存在存储转发时延；

2）需要传输额外的信息量：每个分组上都需要加上控制信息，一定程度上增加了处理时间；

3）乱序到目的主机时，需要对分组重组。

# 二、网络模型

## TCP/IP四层模型

TCP/IP协议族是一个四层协议系统，自低而上分别是数据链路层、网络层、传输层、应用层。

| **层次名称**   | **单位**  | **功 能**    | **协 议**   |
| -------------- | ----------------- | ----------------- | -------------- |
| **数据链路层**    | 帧   | 负责实际数据的传输，对应OSI参考模型的下两层        | HDLC（高级链路控制协议） |
|      |     |          |     PPP（点对点协议）   |
|      |     |          |     SLIP（串行线路接口协议）  |
| **网络层**            | 数据报 | 负责网络间的寻址数据传输，对应OSI参考模型的第三层     | IP（网际协议）       |
|      |     |         |   ICMP（网际控制消息协议 ）      |
|      |     |         |     ARP（地址解析协议）        |
|      |     |        |      RARP（反向地址解析协议）   |
| **传输层**            | 报文段 | 负责提供可靠的传输服务，对应OSI参考模型的第四层      | TCP（控制传输协议）    |
|      |     |       |   UDP（用户数据报协议）  |
| **应用层**            |     | 负责实现一切与应用程序相关的功能，对应OSI参考模型的上三层 | FTP（文件传输协议）    |
|      |     |         |   HTTP（超文本传输协议）   |
|      |     |        |    DNS（域名服务器协议）    |
|      |     |        |    SMTP（简单邮件传输协议）   |
|      |     |        |   NFS（网络文件系统协议）  |



## OSI七层模型

OSI开放式系统互联通信参考模型（Open System Interconnection Reference Model），简称为**OSI模型**（OSI model），一种概念模型，由国际标准化组织(International Organization for Standardization,ISO)提出，一个试图使各种计算机在世界范围内互连为网络的标准框架，把网络分为七层。

|  **分层**  |  **功能**     |
| ------ | -------------- |
| 应用层    | 网络服务与最终用户的一个接口   |
| 表示层    | 数据格式转换编码，数据压缩和解压，数据加密和解密等     |
| 会话层    | 允许不同主机上的用户之间，建立、管理、终止会话       |
| 传输层    | 把上层数据分割成数据段，定义协议端口号，实现不同主机用户进程间的数据通信 |
| 网络层    | 把上层数据封装成数据包，进行逻辑地址寻址，实现不同网络间的路径选择    |
| 数据链路层  | 把上层数据封装成固定格式的帧，进行硬件地址寻址，差错校验等        |
| 物理层    | 物理连接，完成相邻节点之间的原始比特流的传输       |

![](assets/TCP%20IPv4/image-20221127211835355.png)

相同点：
- OSI 参考模型与 TCP/IP 参考模型都采用了层次结构
- 都能够提供面向连接和无连接两种通信服务机制

不同点：
- OSI 采用的七层模型； TCP/IP 是四层或五层结构
- TCP/IP 参考模型没有对网络接口层进行细分，只是一些概念性的描述； OSI 参考模型对服务和协议做了明确的区分
- OSI 参考模型虽然网络划分为七层，但实现起来较困难。TCP/IP 参考模型作为一种简化的分层结构是可以的
- TCP/IP协议去掉表示层和会话层的原因在于会话层、表示层、应用层都是在应用程序内部实现的，最终产出的是一个应用数据包，而应用程序之间是几乎无法实现代码的抽象共享的，这也就造成`OSI`设想中的应用程序维度的分层是无法实现的



# 三、TCP/IP

TCP/IP 是供已连接因特网的计算机进行通信的通信协议。
TCP/IP 指传输控制协议/网际协议 (Transmission Control Protocol / Internet Protocol)。
TCP/IP 定义了电子设备（比如计算机）如何连入因特网，以及数据如何在它们之间传输的标准。

在 TCP/IP 中包含一系列用于处理数据通信的协议：
- TCP (传输控制协议) - 应用程序之间通信
- UDP (用户数据包协议) - 应用程序之间的简单通信
- IP (网际协议) - 计算机之间的通信
- ICMP (因特网消息控制协议) - 针对错误和状态
- DHCP (动态主机配置协议) - 针对动态寻址

TCP/IP 意味着 TCP 和 IP 在一起协同工作。
TCP 负责应用软件（比如你的浏览器）和网络软件之间的通信。
IP 负责计算机之间的通信。
TCP 负责将数据分割并装入 IP 包，然后在它们到达的时候重新组合它们。
IP 负责将包发送至接受者。


## IP 协议

## TCP 协议



