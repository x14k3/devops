# netstat

显示活动的 TCP 连接数、计算机侦听的端口、以太网统计信息、IP 路由表、IPv4 统计信息（针对 IP、ICMP、TCP 和 UDP  协议），以及 IPv6 统计信息（针对 IPv6、ICMPv6、TCP over IPv6 和基于 IPv6 协议的 UDP）。  在不使用参数的情况下，此命令会显示活动的 TCP 连接数。

仅当 Internet 协议 (TCP/IP) 协议作为组件安装在网络连接的网络适配器的属性中时，此命令才可用。

## 语法

```
netstat [-a] [-b] [-e] [-n] [-o] [-p <Protocol>] [-r] [-s] [<interval>]
```

### 参数

|参数|说明|
| ------| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|-a|显示所有活动的 TCP 连接数以及计算机正在侦听的 TCP 和 UDP 端口。|
|-b|显示创建每个连接或侦听端口所涉及的可执行文件。 在某些情况下，众所周知的可执行文件承载了多个独立组件，在这些情况下，将显示创建连接或侦听端口所涉及的组件序列。 在这种情况下，可执行文件名称位于底部的 [] 中，顶部是它调用的组件，依此类推，直到到达 TCP/IP。 请注意，此选项可能很耗时，除非你有足够的权限，否则会失败。|
|-e|显示以太网统计信息，例如发送和接收的字节数和数据包数。 此参数可与 -s 一起使用。|
|-n|显示活动的 TCP 连接数，但是，地址和端口号以数字表示，并且不会尝试确定名称。|
|-o|显示活动的 TCP 连接数，并包括每个连接的进程 ID (PID)。 可以在 Windows 任务管理器的“进程”选项卡上基于 PID 找到应用程序。 此参数可与 -s、-n 和 -p 一起使用。|
|-p`<Protocol>`​|显示 Protocol 指定的协议的连接。在这种情况下，Protocol 可以是 tcp、udp、tcpv6 或 udpv6。如果此参数与 -s 一起使用以按协议显示统计信息，则 Protocol 可以是 tcp、udp、icmp、ip、tcpv6、udpv6、icmpv6 或 ipv6。|
|-s|按协议显示统计信息。 默认情况下，会显示 TCP、UDP、ICMP 和 IP 协议的统计信息。 如果安装了 IPv6 协议，则会显示基于 IPv6 的 TCP、基于 IPv6 的 UDP、ICMPv6 和 IPv6 协议的统计信息。 -p 参数可用于指定一组协议。|
|-r|显示 IP 路由表的内容。 这等效于 route print 命令。|
|​`<interval>`​|每隔 interval 秒重新显示一次所选信息。按 CTRL+C 停止重新播放。 如果省略此参数，此命令仅打印一次所选信息。|
|/?|在命令提示符下显示帮助。|

#### 备注

- netstat 命令提供以下各项的统计信息：
- |参数|说明|
  | ----------| -------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |协议|协议的名称（TCP 或 UDP）。|
  |本地地址|本地计算机的 IP 地址和使用的端口号。 除非指定了 -n 参数，否则将显示与 IP 地址对应的本地计算机的名称和端口的名称。如果端口尚未建立，则端口号显示为星号 (*)。|
  |外部地址|套接字连接到的远程计算机的 IP 地址和端口号。 除非指定了 -n 参数，否则将显示与 IP 地址和端口对应的名称。如果端口尚未建立，则端口号显示为星号 (*)。|
  |状态|指示 TCP 连接的状态，包括：* CLOSE_WAIT* CLOSED* ESTABLISHED* FIN_WAIT_1* FIN_WAIT_2* LAST_ACK* LISTEN* SYN_RECEIVED* SYN_SEND* TIMED_WAIT|

### 示例

若要同时显示以太网统计信息和所有协议的统计信息，请键入：

```
netstat -e -s
```

若要仅显示 TCP 和 UDP 协议的统计信息，请键入：

```
netstat -s -p tcp udp
```

若要每 5 秒显示一次活动的 TCP 连接数和进程 ID，请键入：

```
netstat -o 5
```

若要使用数字形式显示活动的 TCP 连接数和进程 ID，请键入：

```
netstat -n -o
```

‍
